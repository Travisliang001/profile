<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"/><meta name="generator" content="Hugo 0.121.1"/><title>A Trick to Never Confuse Cache Penetration and Cache Breakdown Again | Hugo Apéro</title>
<meta property="twitter:site" content="@apreshill"/><meta property="twitter:creator" content="@apreshill"/><meta name="description" content="In Redis, there are two concepts: Cache Breakdown and Cache Penetration. Because their names are similar, it’s easy to mix them up. However, this article provides a simple memory trick to help you clearly distinguish between the two."/><meta property="og:site_name" content="Hugo Apéro"/><meta property="og:title" content="A Trick to Never Confuse Cache Penetration and Cache Breakdown Again | Hugo Apéro"/><meta property="og:description" content="In Redis, there are two concepts: Cache Breakdown and Cache Penetration. Because their names are similar, it’s easy to mix them up. However, this article provides a simple memory trick to help you clearly distinguish between the two."/><meta property="og:type" content="page"/><meta property="og:url" content="https://Travisliang001.github.io/profile/blog/social/"/><meta property="og:locale" content="en"/><meta property="og:image" content="https://Travisliang001.github.io/profile/blog/social/featured.jpg"/><meta property="twitter:card" content="summary_large_image"/><meta name="twitter:image" content="https://Travisliang001.github.io/profile/blog/social/featured.jpg"/><meta itemprop="name" content="A Trick to Never Confuse Cache Penetration and Cache Breakdown Again"/><meta itemprop="description" content="1. Definitions and Differences Cache Penetration Cache Penetration occurs when the requested data is neither in the cache nor in the database, yet users keep requesting it. This leads to queries directly hitting the database and increasing its load.
Core issue: The requested data does not exist, but a high request volume leads to invalid queries hitting the database. Common scenarios: Requests for non-existent IDs (e.g., negative numbers, invalid characters)."/><meta itemprop="datePublished" content="2024-06-28T00:00:00+00:00"/><meta itemprop="dateModified" content="2024-06-28T00:00:00+00:00"/><meta itemprop="wordCount" content="797"/><meta itemprop="image" content="https://Travisliang001.github.io/profile/blog/social/featured.jpg"/><meta itemprop="keywords" content=""/><!--[if IE]&gt;&lt;script src=//html5shiv.googlecode.com/svn/trunk/html5.js&gt;&lt;/script&gt;&lt;![endif]--><link rel="shortcut icon" href="./img/favicon.ico" type="image/x-icon"/><link rel="icon" href="./img/favicon.ico" type="image/x-icon"/><link rel="stylesheet" href="/profile/style.main.min.daee0c27932bccc589cfce2f05bf6b67b9030fddd8c734272114929bea320dae.css" integrity="sha256-2u4MJ5MrzMWJz84vBb9rZ7kDD93YxzQnIRSSm+oyDa4=" media="screen"/><script src="/profile/panelset.min.ed1ac24b6e16f4e2481e3d1d098ae66f5bc77438aef619e6e266d8ac5b00dc72.js" type="text/javascript"></script><script src="/profile/main.min.a3a181f197d3fe96ab4368a327f9a1f8b1ad807fb94aad54a5eb631909cac2f7.js" type="text/javascript"></script></head><body><div class="grid-container single"><header class="site-header pt4 pb2 mb4 bb b--transparent ph5 headroom z-max" role="banner"><nav class="site-nav db dt-l w-100" role="navigation"><a class="site-brand db dtc-l v-mid link no-underline w-100 w-33-l tc tl-l" href="https://Travisliang001.github.io/profile/" title="Home"><img src="/profile/img/blogophonic-mark-dark.png" class="dib db-l h2 w-auto" alt="Hugo Apéro"/></a><div class="site-links db dtc-l v-mid w-100 w-47-l tc tr-l mt3 mt0-l ttu tracked"><a class="link f6 f5-l dib pv1 ph2" href="/profile/about/" title="About Blogophonic">About</a>
<a class="link f6 f5-l dib pv1 ph2" href="/profile/blog/" title="Blog">Blog</a>
<a class="link f6 f5-l dib pv1 ph2" href="/profile/project/" title="Project Portfolio">Projects</a>
<a class="link f6 f5-l dib pv1 ph2" href="/profile/talk/" title="Talks">Talks</a>
<a class="link f6 f5-l dib pv1 ph2" href="/profile/collection/" title="A collection">A collection</a>
<a class="link f6 f5-l dib pv1 ph2" href="/profile/elements/" title="Element Page">Elements</a></div></nav></header><main class="page-main pa4" role="main"><section class="page-content mw7 center"><article class="post-content pa0 ph4-l"><header class="post-header"><h1 class="f1 lh-solid measure-narrow mb3 fw4">A Trick to Never Confuse Cache Penetration and Cache Breakdown Again</h1><h4 class="f4 mt0 mb4 lh-title measure">In Redis, there are two concepts: Cache Breakdown and Cache Penetration. Because their names are similar, it’s easy to mix them up. However, this article provides a simple memory trick to help you clearly distinguish between the two.</h4><p class="f6 measure lh-copy mv1">By Travis Liang</p><p class="f7 db mv0 ttu">June 28, 2024</p></header><section class="post-body pt5 pb4"><h2 id="1-definitions-and-differences">1. Definitions and Differences
<a href="#1-definitions-and-differences"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"></path><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2><h3 id="cache-penetration">Cache Penetration
<a href="#cache-penetration"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"></path><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h3><p>Cache Penetration occurs when the requested data is <strong>neither in the cache nor in the database</strong>, yet users keep requesting it. This leads to queries directly hitting the database and increasing its load.</p><ul><li><strong>Core issue</strong>: The requested data <strong>does not exist</strong>, but a high request volume leads to invalid queries hitting the database.</li><li><strong>Common scenarios</strong>:<ul><li>Requests for non-existent IDs (e.g., negative numbers, invalid characters).</li><li>Malicious attacks deliberately querying non-existent data.</li><li><em>Example</em>: Requesting a user ID of <code>-1</code> or querying a non-existent product.</li></ul></li></ul><h3 id="cache-breakdown">Cache Breakdown
<a href="#cache-breakdown"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"></path><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h3><p>Cache Breakdown happens when <strong>hotspot data in the cache expires</strong>, and a <strong>large number of concurrent requests</strong> simultaneously query the same data, causing a surge in database load.</p><ul><li><strong>Core issue</strong>: Cached data becomes <strong>invalid</strong>, while the database still contains the correct data, leading to a sudden spike in database pressure.</li><li><strong>Common scenarios</strong>:<ul><li>Expiration of hotspot data (e.g., popular product details, trending news).</li><li>High concurrency scenarios where many users access the same data at the same time.</li><li><em>Example</em>: A flash sale product suddenly losing its cached details.</li></ul></li></ul><h2 id="2-solutions">2. Solutions
<a href="#2-solutions"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"></path><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2><h3 id="21-solutions-for-cache-penetration">2.1 Solutions for Cache Penetration
<a href="#21-solutions-for-cache-penetration"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"></path><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h3><ol><li><p><strong>Bloom Filter</strong></p><ul><li>Add a Bloom Filter before the cache layer to store hash values of all valid keys.</li><li>If a request comes in and the key is <strong>not in the Bloom Filter</strong>, block the request immediately.</li><li><strong>Pros</strong>: Minimal memory usage; effectively blocks non-existent queries.</li><li><strong>Cons</strong>: May cause false positives if not configured properly.</li></ul></li><li><p><strong>Cache Null Values</strong></p><ul><li>Store a null value in the cache for queries that return no data, preventing repeated database hits.</li><li><strong>Pros</strong>: Simple implementation; reduces database load.</li><li><strong>Cons</strong>: Uses extra cache space.</li></ul></li></ol><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="display:flex"><span><span style="color:#998;font-style:italic">//sample code</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:700">public</span><span style="color:#bbb"> </span>object<span style="color:#bbb"> </span><span style="color:#900;font-weight:700">GetProductListNew</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span><span style="color:#458;font-weight:700">int</span><span style="color:#bbb"> </span>cacheTime<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">=</span><span style="color:#bbb"> </span>30;<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span>String<span style="color:#bbb"> </span>cacheKey<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">=</span><span style="color:#bbb"> </span><span style="color:#d14">&#34;product_list&#34;</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span>String<span style="color:#bbb"> </span>cacheValue<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">=</span><span style="color:#bbb"> </span>CacheHelper.<span style="color:teal">Get</span>(cacheKey);<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:700">if</span><span style="color:#bbb"> </span>(cacheValue<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">!=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:700">null</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:700">return</span><span style="color:#bbb"> </span>cacheValue;<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span>cacheValue<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">=</span><span style="color:#bbb"> </span>CacheHelper.<span style="color:teal">Get</span>(cacheKey);<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:700">if</span><span style="color:#bbb"> </span>(cacheValue<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">!=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:700">null</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:700">return</span><span style="color:#bbb"> </span>cacheValue;<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span>}<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">else</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic">// Database query returns no data, set to empty</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">        </span>cacheValue<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">=</span><span style="color:#bbb"> </span>GetProductListFromDB();<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:700">if</span><span style="color:#bbb"> </span>(cacheValue<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">==</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:700">null</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">// If found to be empty, set a default value and cache it</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">            </span>cacheValue<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">=</span><span style="color:#bbb"> </span>string.<span style="color:teal">Empty</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">        </span>CacheHelper.<span style="color:teal">Add</span>(cacheKey,<span style="color:#bbb"> </span>cacheValue,<span style="color:#bbb"> </span>cacheTime);<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:700">return</span><span style="color:#bbb"> </span>cacheValue;<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><ol start="3"><li><strong>Parameter Validation</strong><ul><li>Validate request parameters before querying the cache to filter out illegal inputs.</li><li><em>Example</em>: Reject requests with obviously invalid IDs or formats.</li></ul></li></ol><h3 id="22-solutions-for-cache-breakdown">2.2 Solutions for Cache Breakdown
<a href="#22-solutions-for-cache-breakdown"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"></path><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h3><ol><li><strong>Mutex Lock</strong><ul><li>When the cache expires, use a distributed lock to ensure only one thread rebuilds the cache while others wait.</li><li><strong>Pros</strong>: Prevents multiple threads from querying the database simultaneously.</li><li><strong>Cons</strong>: Complex implementation; might affect performance.</li></ul></li></ol><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="display:flex"><span><span style="color:#998;font-style:italic">//sample code</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:700">public</span><span style="color:#bbb"> </span>String<span style="color:#bbb"> </span><span style="color:#900;font-weight:700">get</span>(key)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">   </span>String<span style="color:#bbb"> </span>value<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">=</span><span style="color:#bbb"> </span>redis.<span style="color:teal">get</span>(key);<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">   </span><span style="color:#000;font-weight:700">if</span><span style="color:#bbb"> </span>(value<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">==</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:700">null</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// Cache value has expired</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">      </span><span style="color:#998;font-style:italic">// Set a 3-minute timeout to prevent failure of the del operation, ensuring the cache can be reloaded from the database next time</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">      </span><span style="color:#000;font-weight:700">if</span><span style="color:#bbb"> </span>(redis.<span style="color:teal">setnx</span>(key_mutex,<span style="color:#bbb"> </span>1,<span style="color:#bbb"> </span>3<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">*</span><span style="color:#bbb"> </span>60)<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">==</span><span style="color:#bbb"> </span>1)<span style="color:#bbb"> </span>{<span style="color:#bbb">  </span><span style="color:#998;font-style:italic">// Successfully set the mutex</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">         </span>value<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">=</span><span style="color:#bbb"> </span>db.<span style="color:teal">get</span>(key);<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">         </span>redis.<span style="color:teal">set</span>(key,<span style="color:#bbb"> </span>value,<span style="color:#bbb"> </span>expire_secs);<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">         </span>redis.<span style="color:teal">del</span>(key_mutex);<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">      </span>}<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">else</span><span style="color:#bbb"> </span>{<span style="color:#bbb">  </span><span style="color:#998;font-style:italic">// Another thread has already loaded the data from the database and set it in the cache, retry to get the cache value</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">         </span>sleep(50);<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">         </span>get(key);<span style="color:#bbb">  </span><span style="color:#998;font-style:italic">// Retry</span><span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">      </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">   </span>}<span style="color:#bbb"> </span><span style="color:#000;font-weight:700">else</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">      </span><span style="color:#000;font-weight:700">return</span><span style="color:#bbb"> </span>value;<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb">   </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><ol start="2"><li><p><strong>Logical Expiration (Never Expire Strategy)</strong></p><ul><li>Set hotspot keys to <strong>never expire physically</strong>, with background threads periodically refreshing the cache.</li><li><strong>Pros</strong>: Prevents sudden cache expiration from overloading the database.</li><li><strong>Cons</strong>: Requires additional logic to manage cache updates.</li></ul></li><li><p><strong>Circuit Breaker &amp; Downgrade Strategy</strong></p><ul><li>In case of cache expiration, return default values or static pages to reduce database load.</li><li><strong>Pros</strong>: Protects the database during cache failures.</li><li><strong>Cons</strong>: May negatively impact user experience.</li></ul></li></ol><h2 id="3-comparison">3. Comparison
<a href="#3-comparison"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"></path><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2><table><thead><tr><th>Issue</th><th>Definition</th><th>Common Scenarios</th><th>Solutions</th></tr></thead><tbody><tr><td><strong>Cache Penetration</strong></td><td>Data <strong>does not exist</strong> in both cache and database, causing direct hits to the database</td><td>Non-existent IDs, malicious attacks</td><td>Bloom Filter, Cache Null Values, Parameter Validation</td></tr><tr><td><strong>Cache Breakdown</strong></td><td><strong>Hotspot data expires</strong> and simultaneous requests lead to a surge in database load</td><td>Hotspot data expiration, high concurrency scenarios</td><td>Mutex Lock, Logical Expiration, Circuit Breaker &amp; Downgrade</td></tr></tbody></table><h2 id="4-memory-trick">4. Memory Trick
<a href="#4-memory-trick"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"></path><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2><ul><li><strong>Cache Breakdown</strong> → Core issue: <strong>Hotspot data expires</strong> → Solution: <strong>Rebuild the hotspot data.</strong></li><li><strong>Cache Penetration</strong> → Core issue: <strong>Data does not exist in Redis or MySQL</strong> → Solution: <strong>Intercept invalid requests.</strong></li></ul><p>Think of it this way:</p><ul><li><strong>Cache Breakdown</strong> results from the expiration of <strong>valid data.</strong></li><li><strong>Cache Penetration</strong> is due to accessing <strong>invalid data.</strong></li></ul><p>It’s similar to police interrogation: you can <strong>“break through”</strong> a suspect’s psychological defenses, but you cannot <strong>“penetrate”</strong> them. “Breakthrough” sounds <strong>righteous</strong>, while “penetration” often carries a <strong>negative connotation</strong> (e.g., “I can see through your little tricks”).</p><p>By using this simple memory trick, you’ll never confuse <strong>Cache Breakdown</strong> with <strong>Cache Penetration</strong> again!</p><h2 id="summary">Summary
<a href="#summary"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"></path><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2><p><strong>Cache Breakdown</strong> and <strong>Cache Penetration</strong> are common topics in Redis system design interviews that are often confused. With the definitions, scenarios, solutions, and memory trick explained above, you should be able to distinguish them clearly and apply the appropriate strategy in practice.</p><hr/><details closed="" class="f6 fw7 input-reset"><dl class="f6 lh-copy"><dt class="fw7">Posted on:</dt><dd class="fw5 ml0">June 28, 2024</dd></dl><dl class="f6 lh-copy"><dt class="fw7">Length:</dt><dd class="fw5 ml0">4 minute read, 797 words</dd></dl><dl class="f6 lh-copy"><dt class="fw7">See Also:</dt></dl></details></section><footer class="post-footer"><div class="post-pagination dt w-100 mt4 mb2"><a class="next dtc pl2 tr v-top fw6" href="https://Travisliang001.github.io/profile/blog/color-themes/">Style your site colors →</a></div></footer></article><div class="post-comments pa0 pa4-l mt4"><script src="https://utteranc.es/client.js" repo="apreshill/apero" issue-term="pathname" theme="boxy-light" label="comments :crystal_ball:" crossorigin="anonymous" async="" type="text/javascript"></script></div></section></main><footer class="site-footer pv4 bt b--transparent ph5" role="contentinfo"><nav class="db dt-l w-100"><p class="site-copyright f7 db dtc-l v-mid w-100 w-33-l tc tl-l pv2 pv0-l mv0 lh-copy">© 2025 RStudio, Anywhere
<span class="middot-divider"></span>
Made with <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/hugo-apero/" rel="dct:source">Hugo Apéro</a></span>.<br/>Based on <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/formspree/blogophonic-hugo" rel="dct:source">Blogophonic</a></span> by <a xmlns:cc="http://creativecommons.org/ns#" href="https://formspree.io" property="cc:attributionName" rel="cc:attributionURL">Formspree</a>.</p><div class="site-social-links db dtc-l v-mid w-100 w-33-l tc pv2 pv0-l mv0"><div class="social-icon-links" aria-hidden="true"><a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://github.com/Travisliang001" title="github" target="_blank" rel="me noopener"><i class="fab fa-github fa-lg fa-fw"></i>
</a><a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="/profile/" title="facebook"><i class="fab fa-facebook fa-lg fa-fw"></i>
</a><a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.linkedin.com/in/jcliang/" title="linkedin" target="_blank" rel="me noopener"><i class="fab fa-linkedin fa-lg fa-fw"></i></a></div></div><div class="site-links f6 db dtc-l v-mid w-100 w-67-l tc tr-l pv2 pv0-l mv0"><a class="dib pv1 ph2 link" href="/profile/license/" title="License">License</a>
<a class="dib pv1 ph2 link" href="/profile/contact/" title="Contact form">Contact</a>
<a class="dib pv1 ph2 link" href="/profile/contributors/" title="Contributors">Contributors</a></div></nav><script>var i,text,code,codes=document.getElementsByTagName("code");for(let e=0;e<codes.length;){if(code=codes[e],code.parentNode.tagName!=="PRE"&&code.childElementCount===0&&(text=code.textContent,/^\$[^$]/.test(text)&&/[^$]\$$/.test(text)&&(text=text.replace(/^\$/,"\\(").replace(/\$$/,"\\)"),code.textContent=text),/^\\\((.|\s)+\\\)$/.test(text)||/^\\\[(.|\s)+\\\]$/.test(text)||/^\$(.|\s)+\$$/.test(text)||/^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text))){code.outerHTML=code.innerHTML;continue}e++}</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous"/><script defer="" src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js" integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8" crossorigin="anonymous"></script><script defer="" src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous" onload="renderMathInElement(document.body)"></script></footer></div></body></html>